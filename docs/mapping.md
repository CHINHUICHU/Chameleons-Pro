## Mapping

### User

| Field    | Type    | Description          |
| -------- | ------- | -------------------- |
| name     | keyword | user name            |
| email    | keyword | user email           |
| password | keyword | user hashed password |

Name, email and password don't need to be analyzed. Keyword is chosen over text.

### Articles

| Field             | Type    | Description                                                                           |
| ----------------- | ------- | ------------------------------------------------------------------------------------- |
| author            | keyword | article author                                                                        |
| title             | text    | article title                                                                         |
| content           | text    | full article content                                                                  |
| processed_content | keyword | 2D array of synonym-tagged tokens, used for uploading mode. norms: false              |
| tag               | keyword | tag extracted by Jieba based on TF-IDF, used for uploading mode                       |
| user_id           | keyword | auto generated user id when user sign up, specify who compares articles. norms: false |
| create_at         | date    | article create time, generated by pipeline                                            |

### Compare_results

| Field        | Type                | Description                                                                |
| ------------ | ------------------- | -------------------------------------------------------------------------- |
| user_id      | keyword             | auto generated user id when user sign up, specify who compares articles    |
| compare_mode | byte                | 1: two article comparison 2: multiple 3: upload for analysis. index: false |
| create_at    | date                | article create time, generated by pipeline                                 |
| status       | byte                | 0: pending 1: finished                                                     |
| match_result | \* array of abjects | see below                                                                  |

### Match_result

| Field      | Type                | Description                                                  |
| ---------- | ------------------- | ------------------------------------------------------------ |
| similarity | float               | similarity score between two articles index: false           |
| source_id  | keyword             | source article id (auto-generated) index: false norms: false |
| target_id  | keyword             | target article id (auto-generated) index: false norms: false |
| status     | byte                | 0: pending 1: finished                                       |
| sentences  | \* arrays of arrays | see below                                                    |

### Sentences

| Field  | Type  | Description                                         |
| ------ | ----- | --------------------------------------------------- |
| source | short | array of related source sentence index index: false |
| target | short | array of related target sentence index index: false |
